const canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d"),backGround=new Image;backGround.src="img/ground.png";const foodImg=new Image;foodImg.src="img/food.png";const deadAudio=new Audio,downAudio=new Audio,eatAudio=new Audio,leftAudio=new Audio,rightAudio=new Audio,upAudio=new Audio;deadAudio.src="audio/dead.mp3",downAudio.src="audio/down.mp3",eatAudio.src="audio/eat.mp3",leftAudio.src="audio/left.mp3",rightAudio.src="audio/right.mp3",upAudio.src="audio/up.mp3";const box=32;let score=0,snake=[];snake[0]={x:288,y:320};let d,food={x:Math.floor(17*Math.random()+1)*32,y:Math.floor(15*Math.random()+3)*32};document.addEventListener("keydown",a=>{37==a.keyCode&&"RIGHT"!=d?(leftAudio.play(),d="LEFT"):38==a.keyCode&&"DOWN"!=d?(upAudio.play(),d="UP"):39==a.keyCode&&"LEFT"!=d?(rightAudio.play(),d="RIGHT"):40==a.keyCode&&"UP"!=d&&(downAudio.play(),d="DOWN")});function collision(a,b){for(let c=0;c<b.length;c++)if(a.x==b[c].x&&a.y==b[c].y)return!0;return!1}function draw(){ctx.drawImage(backGround,0,0);for(let a=0;a<snake.length;a++)ctx.fillStyle=0==a?"green":"white",ctx.fillRect(snake[a].x,snake[a].y,box,box),ctx.strokeStyle="red",ctx.strokeRect(snake[a].x,snake[a].y,box,box);ctx.drawImage(foodImg,food.x,food.y,32,32);let a=snake[0].x,b=snake[0].y;"LEFT"===d?a-=box:"UP"===d?b-=box:"RIGHT"===d?a+=box:"DOWN"===d?b+=box:void 0;a==food.x&&b==food.y?(eatAudio.play(),score++,food={x:Math.floor(17*Math.random()+1)*box,y:Math.floor(15*Math.random()+3)*box}):snake.pop();let c={x:a,y:b};(a<box||a>544||b<96||b>544||!0==collision(c,snake))&&(deadAudio.play(),clearInterval(game)),snake.unshift(c),ctx.fillStyle="white",ctx.font="45px Changa one",ctx.fillText(score,2.4*box,1.6*box)}const game=setInterval(draw,100);